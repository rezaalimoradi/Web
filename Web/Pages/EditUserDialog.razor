@inherits ComponentBase
@using Radzen
@using Radzen.Blazor
@using global::Shared.Dtos.User
@inject DialogService Dialog

<div class="p-3">
    <h4>ویرایش کاربر</h4>

    <EditForm Model="@model" OnValidSubmit="Save">
        <RadzenTextBox @bind-Value="model.UserName" Placeholder="نام کاربری" Style="width:100%" />
        <RadzenTextBox @bind-Value="model.Email" Placeholder="ایمیل" Style="width:100%" class="mt-3" />

        <div class="mt-3">
            <RadzenButton Text="ذخیره" Type="Submit" ButtonStyle="ButtonStyle.Primary" />
            <RadzenButton Text="بستن" Click="@Close" Class="ml-2" />
        </div>
    </EditForm>
</div>

@code {
    [Parameter] public UserDto User { get; set; }
    private UserDto model = new();

    protected override void OnInitialized()
    {
        model = new UserDto
        {
            Id = User.Id,
            UserName = User.UserName,
            Email = User.Email
        };
    }

    private void Save() => Dialog.Close(model);

    private void Close() => Dialog.Close(null);
}
